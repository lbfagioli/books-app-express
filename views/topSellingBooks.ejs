<!DOCTYPE html>
<html>
<head>
    <title>Top Selling Books</title>
    <%- include('common/styles') %>
</head>
<body>
    <%- include('common/navbar') %>
    <div style="padding: 0 5%;">
        <h1>Top 50 Selling Books</h1>

        <form method="get" action="/books/top-selling" style="margin-bottom: 20px;">
            <label for="author">Author:</label>
            <input type="text" id="author" name="author" value="<%= filters.author || '' %>">

            <label for="top5">Author's Top 5 of Year:</label>
            <select id="top5" name="top5">
                <option value="" <%= !filters.top5 ? 'selected' : '' %>>All</option>
                <option value="true" <%= filters.top5 === 'true' ? 'selected' : '' %>>Yes</option>
                <option value="false" <%= filters.top5 === 'false' ? 'selected' : '' %>>No</option>
            </select>

            <button type="submit">Filter</button>
        </form>

        <table>
            <thead>
                <tr>
                    <th>Title</th>
                    <th>Author</th>
                    <th>Total Sales</th>
                    <th>Total Sales by Author</th>
                    <th>Author's Top 5?</th>
                </tr>
            </thead>
            <tbody>
                <% books.forEach(book => { %>
                    <tr>
                        <td><%= book.title %></td>
                        <td><%= book.author %></td>
                        <td><%= book.totalSales %></td>
                        <td><%= book.authorTotal %></td>
                        <td><%= book.top5OfYear ? 'Yes' : 'No' %></td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    </div>
</body>
</html>
