<!DOCTYPE html>
<html>
<head>
    <title>Top Rated Books</title>
    <%- include('common/styles') %>
</head>
<body>
    <%- include('common/navbar') %>
    <div style="padding: 0 5%;">
        <h1>Top 10 Rated Books</h1>

        <form method="get" action="/books/top-rated" style="margin-bottom: 20px;">
            <label for="author">Author:</label>
            <input type="text" id="author" name="author" value="<%= filters.author || '' %>">

            <label for="minScore">Min Score:</label>
            <input type="number" step="0.1" id="minScore" name="minScore" value="<%= filters.minScore || '' %>">

            <label for="maxScore">Max Score:</label>
            <input type="number" step="0.1" id="maxScore" name="maxScore" value="<%= filters.maxScore || '' %>">

            <button type="submit">Filter</button>
        </form>

        <table>
            <thead>
                <tr>
                    <th>Cover</th>
                    <th>Title</th>
                    <th>Author</th>
                    <th>Average Score</th>
                    <th>Highest Review</th>
                    <th>Lowest Review</th>
                </tr>
            </thead>
            <tbody>
                <% books.forEach(book => { %>
                    <tr>
                        <td style="text-align:center;">
                            <% if (book.coverImage) { %>
                                <img src="/uploads/<%= book.coverImage %>" alt="cover" style="width:60px; height:auto; object-fit:cover; border-radius:4px;">
                            <% } else { %>
                                <div style="width:60px; height:90px; display:flex; align-items:center; justify-content:center; background:#f0f0f0; color:#666; border-radius:4px;">No image</div>
                            <% } %>
                        </td>
                        <td><%= book.title %></td>
                        <td><%= book.author %></td>
                        <td><%= book.avgScore.toFixed(2) %></td>
                        <td><%= book.highestReview %></td>
                        <td><%= book.lowestReview %></td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    </div>
</body>
</html>
