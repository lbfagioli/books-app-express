<!DOCTYPE html>
<html>
<head>
    <title>Books List</title>
    <%- include('common/styles') %>
</head>
<body>
    <%- include('common/navbar') %>
    <div style="padding: 0 5%;">
    <h1>Books List</h1>
    <a href="/books/new" style="margin-bottom:20px; background-color: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px;">New Book</a>
    <table>
            <thead>
                <tr>
                    <th>Cover</th>
                    <th>Title</th>
                    <th>Summary</th>
                    <th>Publication Date</th>
                    <th>Reviews</th>
                    <th>Total Sales</th>
                    <th style="width:120px;">Actions</th>
                </tr>
            </thead>
            <tbody>
                <% books.forEach(book => { %>
                    <tr>
                        <td style="text-align:center;">
                            <% if (book.coverImage) { %>
                                <img src="/uploads/<%= book.coverImage %>" alt="cover" style="width:60px; height:auto; object-fit:cover; border-radius:4px;">
                            <% } else { %>
                                <div style="width:60px; height:90px; display:flex; align-items:center; justify-content:center; background:#f0f0f0; color:#666; border-radius:4px;">No image</div>
                            <% } %>
                        </td>
                        <td><%= book.title %></td>
                        <td><%= book.summary %></td>
                        <td><%= book.publicationDate.toDateString() %></td>
                        <td><%= book.reviewCount %></td>
                        <td><%= book.totalSales %></td>
                        <td>
                            <% if (book._id) { %>
                                <a href="/books/<%= book._id %>/edit" style="background-color: #ffc107; color: #333; border: none; padding: 4px 8px; border-radius: 4px; font-size: 13px; margin-right:3px;">Edit</a>
                                <form action="/books/<%= book._id %>/delete" method="POST" style="display:inline; margin:0;">
                                    <button type="submit" style="background-color: #dc3545; color: white; border: none; padding: 4px 8px; border-radius: 4px; font-size: 13px;" onclick="return confirm('Are you sure you want to delete this book?');">Delete</button>
                                </form>
                            <% } %>
                        </td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    </div>
</body>
</html>
